{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCP Tool Contract Schema",
  "description": "JSON schema for Model Context Protocol (MCP) tool contracts",
  "type": "object",
  "required": [
    "schema_version",
    "contract_id",
    "tool_name",
    "description",
    "capabilities",
    "security"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of the contract schema"
    },
    "contract_id": {
      "type": "string",
      "pattern": "^mcp-[a-z0-9-]+$",
      "description": "Unique identifier for this MCP contract"
    },
    "tool_name": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "Name of the tool this contract describes"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Brief description of what the tool does"
    },
    "executable": {
      "type": "string",
      "description": "Command or script to execute the tool"
    },
    "language": {
      "type": "string",
      "enum": ["python", "bash", "javascript", "typescript", "go", "rust"],
      "description": "Primary programming language of the tool"
    },
    "capabilities": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z_]+$"
      },
      "minItems": 1,
      "uniqueItems": true,
      "description": "List of capabilities this tool provides"
    },
    "parameters": {
      "type": "object",
      "description": "Schema for tool parameters",
      "properties": {
        "required": {
          "type": "array",
          "items": {"type": "string"}
        },
        "properties": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z_][a-zA-Z0-9_]*$": {
              "type": "object",
              "properties": {
                "type": {"type": "string"},
                "description": {"type": "string"},
                "default": {},
                "enum": {"type": "array"}
              }
            }
          }
        }
      }
    },
    "security": {
      "type": "object",
      "required": ["input_sanitization", "command_injection_protection"],
      "properties": {
        "input_sanitization": {
          "type": "boolean",
          "description": "Whether input is sanitized"
        },
        "command_injection_protection": {
          "type": "boolean",
          "description": "Whether protected against command injection"
        },
        "timeout_enforcement": {
          "type": "boolean",
          "description": "Whether execution timeout is enforced"
        },
        "privilege_isolation": {
          "type": "boolean",
          "description": "Whether runs with minimal privileges"
        },
        "output_sanitization": {
          "type": "boolean",
          "description": "Whether output is sanitized"
        }
      }
    },
    "usage_examples": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 5
      },
      "description": "Example usage commands"
    },
    "created_date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Date contract was created (YYYY-MM-DD)"
    },
    "last_modified": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Date contract was last modified (YYYY-MM-DD)"
    },
    "status": {
      "type": "string",
      "enum": ["active", "deprecated", "experimental"],
      "description": "Current status of the tool contract"
    }
  }
}
